#!/bin/bash -ex

COMMON="make meson curl git make file bzip2 jq socat lsof ${CC}"

case "${DISTRO}" in
*fedora:*)
    printf 'max_parallel_downloads=8\nfastestmirror=1\n' >> /etc/dnf/dnf.conf
    dnf -y clean all
    dnf -y --setopt=deltarpm=0 update
    dnf -y install ${COMMON}
    dnf -y install --setopt=install_weak_deps=False --skip-unavailable intltool automake glib2-devel gtksourceview3-devel \
        libtool poppler-devel poppler-glib-devel gtkspell3-devel \
        texlive-synctex texlive-lib-devel texlive-latex texlive-beamer \
        texlive-pst-graphicx texlive-graphicxpsd texlive-ae gtk3-devel \
        texlive-collection-fontsrecommended texlive-colourchange \
        texlive-lib \
        texlive-base \
        texlive-epstopdf \
        texlive-epstopdf-pkg \
        texlive-cm \
        texlive-etex \
        texlive-hyph-utf8 \
        texlive-hyphen-base \
        texlive-knuth-lib \
        texlive-plain \
        texlive-tex-ini-files \
        texlive-unicode-data \
        texlive-graphics-def \
        texlive-gsftopk \
        texlive-luatex \
        texlive-texlive.infra \
        texlive-texlive-scripts \
        texlive-kpathsea \
        texlive-iftex \
        texlive-url \
        texlive-amsmath \
        texlive-etex-pkg \
        texlive-etoolbox \
        texlive-kvoptions \
        texlive-pdftexcmds \
        texlive-atbegshi \
        texlive-babel \
        texlive-booktabs \
        texlive-footmisc \
        texlive-ltxcmds \
        texlive-multido \
        texlive-amsfonts \
        texlive-atveryend \
        texlive-auxhook \
        texlive-etexcmds \
        texlive-graphics-cfg \
        texlive-graphics \
        texlive-tools \
        texlive-xkeyval \
        texlive-caption \
        texlive-colortbl \
        texlive-csquotes \
        texlive-geometry \
        texlive-hypdoc \
        texlive-infwarerr \
        texlive-lm \
        texlive-marvosym \
        texlive-palatino \
        texlive-paralist \
        texlive-ragged2e \
        texlive-setspace \
        texlive-zapfding \
        texlive-catchfile \
        texlive-ifplatform \
        texlive-auto-pst-pdf \
        texlive-subfig \
        texlive-breakurl \
        texlive-logreq \
        texlive-sauerj \
        texlive-babelbib \
        texlive-memoir \
        texlive-alphalph \
        texlive-avantgar \
        texlive-bigintcalc \
        texlive-bitset \
        texlive-bookman \
        texlive-bookmark \
        texlive-changepage \
        texlive-charter \
        texlive-courier \
        texlive-ctablestack \
        texlive-luatexbase \
        texlive-dehyph \
        texlive-pdftex \
        texlive-enumitem \
        texlive-euenc \
        texlive-fancyhdr \
        texlive-filecontents \
        texlive-float \
        texlive-fp \
        texlive-fpl \
        texlive-mathpazo \
        texlive-gettitlestring \
        texlive-helvetic \
        texlive-hobsub \
        texlive-hologo \
        texlive-hycolor \
        texlive-ifmtarg \
        texlive-intcalc \
        texlive-kastrup \
        texlive-kvdefinekeys \
        texlive-kvsetkeys \
        texlive-l3backend \
        texlive-latex-fonts \
        texlive-latexconfig \
        texlive-letltxmacro \
        texlive-lua-alt-getopt \
        texlive-lua-uni-algos \
        texlive-luabidi \
        texlive-lualibs \
        texlive-luaotfload \
        texlive-makecmds \
        texlive-marginnote \
        texlive-mparhack \
        texlive-natbib \
        texlive-pdfcolmk \
        texlive-xcolor \
        texlive-eso-pic \
        texlive-pdfescape \
        texlive-picture \
        texlive-placeins \
        texlive-pst-math \
        texlive-refcount \
        texlive-stringenc \
        texlive-symbol \
        texlive-times \
        texlive-titlesec \
        texlive-underscore \
        texlive-uniquecounter \
        texlive-rerunfilecheck \
        texlive-hyperref \
        texlive-attachfile \
        texlive-utopia \
        texlive-psnfss \
        texlive-varwidth \
        texlive-xstring \
        texlive-zref \
        texlive-l3packages \
        texlive-xpatch \
        texlive-algorithms \
        texlive-bera \
        texlive-cm-super \
        texlive-fontspec \
        texlive-xunicode \
        texlive-tipa \
        texlive-xifthen \
        texlive-latex \
        texlive-l3kernel \
        texlive-currfile \
        texlive-filehook \
        texlive-pgf \
        texlive-ms \
        texlive-koma-script \
        texlive-polyglossia \
        texlive-biblatex \
        texlive-bidi \
        texlive-showexpl \
        texlive-listings \
        texlive-fancyvrb \
        texlive-pst-3d \
        texlive-pst-coil \
        texlive-pst-eps \
        texlive-pst-fill \
        texlive-pst-grad \
        texlive-pst-node \
        texlive-pst-ovl \
        texlive-pst-plot \
        texlive-pst-text \
        texlive-pst-tools \
        texlive-pst-tree \
        texlive-pstricks-add \
        texlive-pstricks \
        texlive-glyphlist \
        texlive-wasy \
        texlive-modes \
        texlive-metafont \
        texlive-wasy-type1 \
        texlive-xdvi \
        texlive-texlive-en \
        texlive-tex \
        texlive-mfware \
        texlive-makeindex \
        texlive-luahbtex \
        texlive-dvips \
        texlive-bibtex \
        texlive-zapfchan \
        texlive-xetexconfig \
        texlive-wasysym \
        texlive-ucs \
        texlive-txfonts \
        texlive-translator \
        texlive-texlive-msg-translations \
        texlive-texlive-common-doc \
        texlive-tex-gyre \
        texlive-tex-gyre-math \
        texlive-sansmathaccent \
        texlive-rsfs \
        texlive-pxfonts \
        texlive-ncntrsbk \
        texlive-mflogo \
        texlive-mflogo-font \
        texlive-manfnt-font \
        texlive-latex \
        texlive-lm-math \
        texlive-knuth-local \
        texlive-hyphenex \
        texlive-firstaid \
        texlive-everyshi \
        texlive-eurosym \
        texlive-euro \
        texlive-euro-ce \
        texlive-enctex \
        texlive-ec \
        texlive-colorprofiles \
        texlive-cmextra \
        texlive-amscls \
        texlive-dvipdfmx \
        texlive-xetex \
        texlive-collection-basic \
        texlive-collection-fontsrecommended \
        texlive-beamer \
        texlive-synctex \
        texlive-pst-graphicx \
        texlive-graphicxpsd \
        texlive-ae \
        texlive-colourchange \
        texlive-colourchange-doc \
        texlive-todonotes \
        texlive-babel-english \
        texlive-tocbibind \
        texlive-multirow \
        texlive-mathtools \
        texlive-advdate \
        texlive-framed \
        texlive-grfext
    ;;
esac
